<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Title</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
	<!-- custom css -->
	<link rel="stylesheet" type="text/css" href="static/main.css">
</head>
<body>
    <script>
        // Get the session_id from the HTML
        const sessionId = "user_data_SESSION={{user}}";

        window.addEventListener("beforeunload", function (event) {
            fetch("https://mindmategpt.herokuapp.com/api/session/" + sessionId, {
                method: "DELETE",
                keepalive: true
            });
        });

    </script>
    <p style="display: none" id="session">SESSION={{user}}</p>
    <div id="landing"></div>
    <div id="form" style="display:none;" class="container"></div>
    <div id="chat" style="display:none;"></div>

	<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery.bootstrapvalidator/0.5.3/js/bootstrapValidator.min.js"> </script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script src="static/form/model/formModel.js"></script>
    <script src="static/form/service/formService.js"></script>
    <script src="static/form/controller/formController.js"></script>
    <script src="static/landing/controller/landingController.js"></script>
    <script src="static/chat/controller/chatController.js"></script>
    <script src="static/chat/model/chatModel.js"></script>
    <script src="static/chat/service/chatService.js"></script>
    <script>
    window.onload = function() {
        loadHTML('static/landing/view/landingView.html', 'landing')
            .then(() => {
            loadHTML('static/form/view/formView.html', 'form')
                .then(() => {
                    const contactFormModel = new ContactFormModel();
                    const contactFormService = new ContactFormServices();
                    const contactFormController = new ContactFormController(contactFormModel, contactFormService);

                    contactFormController.init();
                    loadHTML('static/chat/view/chatView.html', 'chat')
                        .then(() => {
                            const chatModel = new ChatModel();
                            const chatService = new ChatService();
                            const chatController = new ChatController(chatModel, chatService);
                        });
                    });
                });
            };

    function loadHTML(url, elementId) {
        return fetch(url)
            .then(response => response.text())
            .then(html => {
                document.getElementById(elementId).innerHTML = html;
            })
            .catch(error => console.warn('Something went wrong.', error));
    }
    </script>
</body>
</html>
